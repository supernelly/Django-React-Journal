(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(19),c=n.n(r),o=(n(50),n(51),n(52),n(20)),i=n(6),l=n(22),u=n(23),j=n(26),d=n(25),h=n(24),b=n(30),m=n(98),p=n(90),O=n(91),x=n(92),f=n(93),g=n(94),v=n(95),k=n(96),y=n(97),S=n(2),I=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,s=t.value;"checkbox"===e.target.type&&(s=e.target.checked);var r=Object(b.a)(Object(b.a)({},a.state.activeItem),{},Object(h.a)({},n,s));a.setState({activeItem:r})},a.state={activeItem:a.props.activeItem},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggle,a=t.onSave;return Object(S.jsxs)(m.a,{isOpen:!0,toggle:n,children:[Object(S.jsx)(p.a,{toggle:n,children:"Journal Entry"}),Object(S.jsx)(O.a,{children:Object(S.jsxs)(x.a,{children:[Object(S.jsxs)(f.a,{children:[Object(S.jsx)(g.a,{for:"journal-title",children:"Title"}),Object(S.jsx)(v.a,{type:"text",id:"journal-title",name:"title",value:this.state.activeItem.title,onChange:this.handleChange,placeholder:"Enter Title"})]}),Object(S.jsxs)(f.a,{children:[Object(S.jsx)(g.a,{for:"journal-body",children:"Body"}),Object(S.jsx)(v.a,{type:"textarea",id:"journal-body",name:"body",value:this.state.activeItem.body,onChange:this.handleChange,placeholder:"Body"})]})]})}),Object(S.jsx)(k.a,{children:Object(S.jsx)(y.a,{color:"success",onClick:function(){return a(e.state.activeItem)},children:"Save"})})]})}}]),n}(a.Component),N=n(17),w=n.n(N),C=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).refreshList=function(){var e=sessionStorage.getItem("token");w.a.get("https://afternoon-hamlet-77607.herokuapp.com/api/entries/",{headers:{Authorization:"Token "+e,Username:sessionStorage.getItem("username")}}).then((function(e){return a.setState({entryList:e.data})})).catch((function(e){return console.log(e)}))},a.toggle=function(){a.setState({modal:!a.state.modal})},a.handleSubmit=function(e){a.toggle();var t=sessionStorage.getItem("token");w.a.post("https://afternoon-hamlet-77607.herokuapp.com/api/entries/",e,{headers:{Authorization:"Token "+t}}).then((function(e){return a.refreshList()}))},a.handleDelete=function(e){var t=sessionStorage.getItem("token");w.a.delete("https://afternoon-hamlet-77607.herokuapp.com/api/entries/".concat(e.id,"/"),{headers:{Authorization:"Token "+t}}).then((function(e){return a.refreshList()}))},a.createItem=function(){var e={title:"",body:"",username:sessionStorage.getItem("username")};a.setState({activeItem:e,modal:!a.state.modal})},a.editItem=function(e){a.setState({activeItem:e,modal:!a.state.modal})},a.renderItems=function(){return a.state.entryList.map((function(e){return Object(S.jsxs)("li",{className:"list-group-item d-flex justify-content-between flex-column",children:[Object(S.jsx)("span",{className:"mr-2 font-weight-bold",children:e.title}),Object(S.jsx)("span",{className:"mr-2 mb-2",children:e.body}),Object(S.jsxs)("span",{children:[Object(S.jsx)("button",{className:"btn btn-secondary mr-2",onClick:function(){return a.editItem(e)},children:"Edit"}),Object(S.jsx)("button",{className:"btn btn-danger",onClick:function(){return a.handleDelete(e)},children:"Delete"})]})]},e.id)}))},a.logOut=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),window.location.href="/"},a.state={entryList:[],modal:!1,activeItem:{title:"",body:"",username:sessionStorage.getItem("username")}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.refreshList()}},{key:"render",value:function(){return Object(S.jsxs)("main",{className:"container",children:[Object(S.jsx)("h1",{className:"text-black text-uppercase text-center my-4",children:"Journal"}),Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-6 col-sm-10 mx-auto p-0",children:Object(S.jsxs)("div",{className:"card p-3",children:[Object(S.jsx)("div",{className:"mb-4",children:Object(S.jsx)("button",{className:"btn btn-primary",onClick:this.createItem,children:"New Entry"})}),Object(S.jsx)("ul",{className:"list-group list-group-flush border-top-0",children:this.renderItems()})]})})}),Object(S.jsx)("div",{className:"text-center my-4",children:Object(S.jsx)("button",{className:"btn btn-primary",onClick:this.logOut,children:"Log out"})}),this.state.modal?Object(S.jsx)(I,{activeItem:this.state.activeItem,toggle:this.toggle,onSave:this.handleSubmit}):null]})}}]),n}(a.Component),L=n(16),T=n.n(L),D=n(21),_=n(15);function E(e){var t=e.setToken,n=Object(a.useState)(),s=Object(_.a)(n,2),r=s[0],c=s[1],i=Object(a.useState)(),l=Object(_.a)(i,2),u=l[0],j=l[1],d=Object(a.useState)(),h=Object(_.a)(d,2),b=h[0],m=h[1];function p(e){return O.apply(this,arguments)}function O(){return(O=Object(D.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.post("https://afternoon-hamlet-77607.herokuapp.com/api/login/",n).then((function(e){sessionStorage.setItem("username",r),t(e.data)})).catch((function(e){e.response&&e.response.data.non_field_errors[0]&&(console.log(e.response.data.non_field_errors[0]),m(e.response.data.non_field_errors[0]))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){var e=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,p({username:r,password:u});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h1",{className:"text-black text-uppercase text-center my-4",children:"Login"}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-md-6 col-sm-10 mx-auto p-0",children:[Object(S.jsxs)("div",{className:"card p-3",children:[Object(S.jsxs)("form",{onSubmit:x,children:[Object(S.jsxs)("label",{children:[Object(S.jsx)("p",{children:"Username"}),Object(S.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)}})]}),Object(S.jsxs)("label",{children:[Object(S.jsx)("p",{children:"Password"}),Object(S.jsx)("input",{type:"password",onChange:function(e){return j(e.target.value)}})]}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{type:"submit",children:"Submit"})})]}),Object(S.jsxs)("span",{children:["Don't have an account? ",Object(S.jsx)(o.b,{to:"/register",children:"Register"})]})]}),Object(S.jsxs)("h3",{className:"error",children:[" ",b," "]})]})})]})}function B(){var e=Object(a.useState)(),t=Object(_.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(),c=Object(_.a)(r,2),l=c[0],u=c[1],j=Object(a.useState)(),d=Object(_.a)(j,2),h=d[0],b=d[1],m=Object(i.f)();function p(e){return O.apply(this,arguments)}function O(){return(O=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.post("https://afternoon-hamlet-77607.herokuapp.com/api/register/",t).then((function(e){m.push("/")})).catch((function(e){e.response&&e.response.data.username[0]&&(console.log(e.response.data.username[0]),b(e.response.data.username[0]))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){var e=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,p({username:n,password:l});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h1",{className:"text-black text-uppercase text-center my-4",children:"Register"}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-md-6 col-sm-10 mx-auto p-0",children:[Object(S.jsxs)("div",{className:"card p-3",children:[Object(S.jsxs)("form",{onSubmit:x,children:[Object(S.jsxs)("label",{children:[Object(S.jsx)("p",{children:"Username"}),Object(S.jsx)("input",{type:"text",onChange:function(e){return s(e.target.value)}})]}),Object(S.jsxs)("label",{children:[Object(S.jsx)("p",{children:"Password"}),Object(S.jsx)("input",{type:"password",onChange:function(e){return u(e.target.value)}})]}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{type:"submit",children:"Submit"})})]}),Object(S.jsxs)("span",{children:["Have an account? ",Object(S.jsx)(o.b,{to:"/",children:"Login"})]})]}),Object(S.jsxs)("h3",{className:"error",children:[" ",h," "]})]})})]})}var F=function(){var e=function(){var e=Object(a.useState)(sessionStorage.getItem("token")),t=Object(_.a)(e,2),n=t[0],s=t[1];return{setToken:function(e){sessionStorage.setItem("token",e.token),s(e.token)},token:n}}(),t=e.token,n=e.setToken;return t&&"undefined"!==t?Object(S.jsx)("div",{className:"wrapper",children:Object(S.jsx)(C,{})}):Object(S.jsx)(o.a,{children:Object(S.jsxs)(i.c,{children:[Object(S.jsx)(i.a,{path:"/login",children:Object(S.jsx)(E,{setToken:n})}),Object(S.jsx)(i.a,{path:"/register",children:Object(S.jsx)(B,{})}),Object(S.jsx)(i.a,{path:"/",children:Object(S.jsx)(E,{setToken:n})})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,99)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(F,{})}),document.getElementById("root")),J()}},[[88,1,2]]]);
//# sourceMappingURL=main.6ebb3850.chunk.js.map